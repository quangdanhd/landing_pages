(function(){"use strict";var e={7957:function(e,t,n){n.d(t,{db:function(){return q}});var s=n(5130),o=n(6768);const a={class:"--dark-theme",id:"chat"};function r(e,t,n,s,r,i){const l=(0,o.g2)("modal"),u=(0,o.g2)("chat");return(0,o.uX)(),(0,o.CE)(o.FK,null,[r.name?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(l,{key:0,onSetName:i.setName},null,8,["onSetName"])),(0,o.Lk)("div",a,[r.name?((0,o.uX)(),(0,o.Wv)(u,{key:0,"init-name":r.name},null,8,["init-name"])):(0,o.Q3)("",!0)])],64)}const i={class:"--dark-theme init-modal"},l=(0,o.Lk)("h3",null,"What's your name?",-1);function u(e,t,n,a,r,u){return(0,o.uX)(),(0,o.CE)("div",i,[l,(0,o.bo)((0,o.Lk)("input",{onKeyup:t[0]||(t[0]=(0,s.jR)(((...e)=>u.onEnter&&u.onEnter(...e)),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e),type:"text",class:"username",placeholder:"Enter your name and press enter",maxlength:"15",autofocus:""},null,544),[[s.Jo,r.name]])])}var c={name:"InitModal",data(){return{name:null}},methods:{onEnter(){this.name.trim()&&this.$emit("set-name",this.name)}}},h=n(1241);const d=(0,h.A)(c,[["render",u]]);var m=d,p=n(4232);const g={class:"chat__conversation-board",ref:"chatBoard"},f={class:"chat__conversation-board__message__context"},v={class:"message__text"},b={key:0,class:"message__name"},_=(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:"currentColor",class:"bi bi-person-circle",viewBox:"0 0 16 16"},[(0,o.Lk)("path",{d:"M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"}),(0,o.Lk)("path",{"fill-rule":"evenodd",d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"})],-1),k={class:"chat__conversation-panel"},y={class:"chat__conversation-panel__container"},w=(0,o.Fv)('<button class="chat__conversation-panel__button panel-item btn-icon add-file-button"><svg class="feather feather-plus sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></button><button class="chat__conversation-panel__button panel-item btn-icon emoji-button"><svg class="feather feather-smile sc-dnqmqq jxshSx" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></svg></button>',2),x=(0,o.Lk)("button",{class:"chat__conversation-panel__button panel-item btn-icon send-message-button"},[(0,o.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true","data-reactid":"1036"},[(0,o.Lk)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,o.Lk)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})])],-1);function B(e,t,n,a,r,i){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",g,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.messages,((t,n)=>((0,o.uX)(),(0,o.CE)("div",{key:n,class:(0,p.C4)(["chat__conversation-board__message-container",{reversed:e.uid===t.uid}])},[(0,o.Lk)("div",f,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.messages,((n,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:"chat__conversation-board__message__bubble"},[(0,o.Lk)("div",v,[0===s&&e.uid!==t.uid?((0,o.uX)(),(0,o.CE)("div",b,[_,(0,o.Lk)("span",null,(0,p.v_)(t?.name),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",null,(0,p.v_)(n),1)])])))),128))])],2)))),128))],512),(0,o.Lk)("div",k,[(0,o.Lk)("div",y,[w,(0,o.bo)((0,o.Lk)("input",{onKeyup:t[0]||(t[0]=(0,s.jR)(((...t)=>e.messageOnEnter&&e.messageOnEnter(...t)),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=t=>e.message=t),ref:"inputMessage",class:"chat__conversation-panel__input panel-item",placeholder:"Type a message...",autofocus:""},null,544),[[s.Jo,e.message]]),x])])],64)}n(4114);var E=n(3574),C=n(4161),L={name:"ChatGroup",props:{initName:String},data(){return{uid:(0,E.A)(),name:null,message:null,messages:[],messageKeys:[],init:!1,boardAtBottom:!0}},created(){this.name=this.initName.substring(0,15).trim(),(0,C.Zy)((0,C.KR)(q,"messages"),(e=>{const t=e.val();this.updateMessages(t)}))},mounted(){this.$refs.inputMessage.focus(),this.$refs.chatBoard.addEventListener("scroll",(()=>{this.boardAtBottom=this.$refs.chatBoard.scrollTop>this.$refs.chatBoard.scrollHeight-this.$refs.chatBoard.offsetHeight-15}))},methods:{updateMessages(e){if(!e)return;const t=Object.keys(e);let n=[];for(let s=t.length-1;s>=0;s--){const e=t[s];if(this.messageKeys.includes(e))break;this.messageKeys.push(e),n.push(e)}n.reverse();for(let s=0;s<n.length;s++){const t=n[s],o=this.messages.length-1;this.messages[o]&&e[t].uid===this.messages[o].uid?this.messages[o].messages.push(e[t].message):this.messages.push({uid:e[t].uid,name:e[t].name,messages:[e[t].message]})}this.boardScroll()},messageOnEnter(){this.message.trim()&&((0,C.VC)((0,C.KR)(q,"messages"),{uid:this.uid,name:this.name,message:this.message}).then(),this.message=null,this.boardScroll(!0))},boardScroll(e=!1){this.$nextTick((()=>{if(!this.init)return this.init=!0,void this.boardScrollToBottom();e?this.boardScrollToBottom(!0):this.boardAtBottom&&this.boardScrollToBottom()})).then()},boardScrollToBottom(e=!1){this.$refs.chatBoard.scrollTo({top:this.$refs.chatBoard.scrollHeight,behavior:e?"smooth":"instant"})}}},j=L;const O=(0,h.A)(j,[["render",B]]);var S=O,K={name:"App",components:{Modal:m,Chat:S},data(){return{name:null}},methods:{setName(e){this.name=e}}};const M=(0,h.A)(K,[["render",r]]);var A=M,T=n(6400),X=n(5942);const $={apiKey:"AIzaSyBEGWvppmOU6PQSKELaUD55D2MmrZDM-kg",authDomain:"vue-chat-group-3cf65.firebaseapp.com",projectId:"vue-chat-group-3cf65",storageBucket:"vue-chat-group-3cf65.appspot.com",messagingSenderId:"818842894758",appId:"1:818842894758:web:44f1030291c7e5358bcf67",measurementId:"G-S19BHE6DYY"},I=(0,T.Wp)($);(0,X.P5)(I);const q=(0,C.C3)(I);(0,s.Ef)(A).mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,a){if(!s){var r=1/0;for(c=0;c<e.length;c++){s=e[c][0],o=e[c][1],a=e[c][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[l])}))?s.splice(l--,1):(i=!1,a<r&&(r=a));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[s,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,a,r=s[0],i=s[1],l=s[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(l)var c=l(n)}for(t&&t(s);u<r.length;u++)a=r[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},s=self["webpackChunkvue_chat_group"]=self["webpackChunkvue_chat_group"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[504],(function(){return n(7957)}));s=n.O(s)})();
//# sourceMappingURL=app.210d29aa.js.map